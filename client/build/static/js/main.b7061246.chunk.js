(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{208:function(e,t,a){e.exports=a(406)},213:function(e,t,a){},214:function(e,t){},400:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(6),o=a.n(r),i=(a(213),a(408)),c=a(409),s=a(21),m=a(40),u=a(415),p=a(416),d=a(410),f=a(28),E=a.n(f),g=a(27),y=a.n(g),b=a(43),h={data:[],in:0,out:0,pagination:{current:1,pageSize:10},filters:[],sorter:{},query:{},loading:!1},v=Object(b.a)({},h),O=[];function F(){O.forEach((function(e){return e&&e(v)}))}function j(e){return O.push(e),F(),function(){O=O.filter((function(t){return t!==e}))}}var w=function(e,t,a,n){var l="";return a&&(a.field&&(l=a.field),"ascend"===a.order?l+=",asc":"descend"===a.order&&(l+=",desc")),Object(b.a)({size:e.pageSize,page:e.current-1,sort:l},n)};function S(e,t,a,n){(v=Object(b.a)({},v)).pagination=e,v.sorter=a,v.filters=t,v.loading=!0,v.query=n,F(),y()({url:"api/bills/",method:"get",contentType:"application/x-www-form-urlencoded",data:w(e,0,a,n)}).then((function(t){(v=Object(b.a)({},v)).loading=!1,t.success&&(v.data=t.data.page.content,v.in=t.data.in,v.out=t.data.out,v.pagination=Object(b.a)(Object(b.a)({},e),{},{total:t.data.page.totalElements})),F()}))}var I=function(){var e=[{title:"Type",dataIndex:"type",sorter:!0,render:function(e){var t="";return 1===e?t="income":0===e&&(t="outcome"),l.a.createElement(l.a.Fragment,null,t)},width:"20%"},{title:"Time",dataIndex:"time",sorter:!0,render:function(e){var t=E()(e).format("YYYY-MM-DD HH:mm:ss");return l.a.createElement(l.a.Fragment,null,t)},width:"20%"},{title:"Category",sorter:!0,dataIndex:"categoryName"},{title:"Amount",sorter:!0,dataIndex:"amount"},{title:"Operation",dataIndex:"",key:"x",render:function(e){return l.a.createElement(m.a,{onClick:function(){return function(e){y()({url:"api/bills/"+e.id,method:"delete",success:function(e){e.success?(u.a.success("Remove Successfully!"),S(n.pagination,n.filters,n.sorter)):u.a.error("Remove Failed")},error:function(){u.a.error("Remove Failed")}}),console.log(e)}(e)}},"Remove")}}],t=l.a.useState(h),a=Object(s.a)(t,2),n=a[0],r=a[1];return l.a.useEffect((function(){return j((function(e){r(e)}))})),l.a.useEffect((function(){S(h.pagination)}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{type:"info",description:l.a.createElement("p",null,"Out come total\uff1a",l.a.createElement("span",{style:{color:"red"}},n.out),"$; Income total\uff1a",l.a.createElement("span",{style:{color:"green"}},n.in),"$.")}),l.a.createElement(d.a,{columns:e,rowKey:function(e){return e.id},dataSource:n.data,pagination:n.pagination,loading:n.loading,onChange:function(e,t,a){S(e,t,a,n.query)}}))},C=a(150),k=a(413),x=a(414),A=k.a.Dragger,B=function(){var e=l.a.useState(h),t=Object(s.a)(e,2),a=t[0],n=t[1],r=l.a.useState([]),o=Object(s.a)(r,2),i=o[0],c=o[1],p=l.a.useState(!1),d=Object(s.a)(p,2),f=d[0],E=d[1];l.a.useEffect((function(){return j((function(e){n(e)}))}));var g={name:"files",multiple:!0,accept:".csv",onRemove:function(e){var t=i.indexOf(e),a=i.slice();a.splice(t,1),c(a)},beforeUpload:function(e,t){return c([].concat(Object(C.a)(i),Object(C.a)(t))),!1},fileList:i};return l.a.createElement("div",null,l.a.createElement(A,g,l.a.createElement("p",{className:"ant-upload-drag-icon"},l.a.createElement(x.a,null)),l.a.createElement("p",{className:"ant-upload-text"},"Click or drag csv file to this area to upload"),l.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload. Please Download the template csv file, only the template format supported.")),l.a.createElement(m.a,{type:"primary",onClick:function(){var e=new FormData;i.forEach((function(t){e.append("files",t)})),E(!0),y()({url:"api/bills/upload",method:"post",processData:!1,data:e,success:function(e){(E(!1),e.success)?(u.a.success("Upload Successfully!"),S(a.pagination,a.filters,a.sorter,a.query),c([])):u.a.error("Upload Failed")},error:function(){E(!1),u.a.error("Upload Failed")}})},disabled:0===i.length,loading:f,style:{marginTop:16}},f?"Uploading...":"Start Upload"),l.a.createElement("a",{href:"bill.csv",style:{marginLeft:16}},"Download CSV Template File"))},T=a(412),Y=a(91),D=a(411),P=a(417),q={labelCol:{span:8},wrapperCol:{span:16}},N={wrapperCol:{offset:8,span:16}},M=function(){var e=T.a.useForm(),t=Object(s.a)(e,1)[0],a=l.a.useState([]),n=Object(s.a)(a,2),r=n[0],o=n[1],i=l.a.useState(h),c=Object(s.a)(i,2),p=c[0],d=c[1];l.a.useEffect((function(){return j((function(e){d(e)}))})),l.a.useEffect((function(){y()({url:"api/categories/",method:"get",type:"json"}).then((function(e){o(e.data)}))}),[]);return l.a.createElement(T.a,Object.assign({form:t},q,{name:"billAddForm",onFinish:function(e){e.time=e.time.valueOf();var t=JSON.stringify(e);y()({url:"api/bills/",method:"post",contentType:"application/json",processData:!1,data:t,success:function(e){e.success?(u.a.success("Add Successfully!"),S(p.pagination,p.filters,p.sorter,p.query)):u.a.error("Add Fail!")},error:function(){u.a.error("Add Fail!")}})},onFinishFailed:function(e){console.log("Failed:",e)},initialValues:{type:0,time:E()()}}),l.a.createElement(T.a.Item,{label:"Bill Type",name:"type",rules:[{required:!0,message:"Please select a type!"}]},l.a.createElement(Y.a,{placeholder:"Please select a type"},l.a.createElement(Y.a.Option,{value:0},"outcome"),l.a.createElement(Y.a.Option,{value:1},"income"))),l.a.createElement(T.a.Item,{name:"time",label:"Bill Time",rules:[{type:"object",required:!0,message:"Please select bill time!"}]},l.a.createElement(D.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"})),l.a.createElement(T.a.Item,{label:"Bill Category",name:"categoryId",rules:[{required:!0,message:"Please select bill category!"}]},l.a.createElement(Y.a,{placeholder:"Please select bill category"},r.map((function(e,t){return l.a.createElement(Y.a.Option,{key:e.id,value:e.id},e.name)})))),l.a.createElement(T.a.Item,{name:"amount",label:"Bill Amount",rules:[{required:!0,message:"Please type bill amount!"}]},l.a.createElement(P.a,{min:0,step:.1,precision:2})),l.a.createElement(T.a.Item,N,l.a.createElement(m.a,{type:"primary",htmlType:"submit"},"Add Bill"),l.a.createElement(m.a,{style:{margin:"0 8px"},onClick:function(){t.resetFields()}},"Reset")))},R={labelCol:{span:8},wrapperCol:{span:16}},H={wrapperCol:{offset:8,span:16}},U=function(){var e=T.a.useForm(),t=Object(s.a)(e,1)[0],a=l.a.useState([]),n=Object(s.a)(a,2),r=n[0],o=n[1],i=l.a.useState(h),c=Object(s.a)(i,2),u=c[0],p=c[1];l.a.useEffect((function(){return j((function(e){p(e)}))})),l.a.useEffect((function(){y()({url:"api/categories/",method:"get",type:"json"}).then((function(e){o(e.data)}))}),[]);return l.a.createElement(T.a,Object.assign({form:t},R,{name:"billSearchForm",onFinish:function(e){var t=u.pagination,a=u.filters,n=u.sorter,l=Object(b.a)({},e);l.time&&(l.year=l.time.get("year"),l.month=l.time.get("month")+1,delete l.time),t.current=1,S(t,a,n,l)},onFinishFailed:function(e){console.log("Failed:",e)}}),l.a.createElement(T.a.Item,{label:"Bill Type",name:"type"},l.a.createElement(Y.a,{placeholder:"Please select a type"},l.a.createElement(Y.a.Option,{value:0},"outcome"),l.a.createElement(Y.a.Option,{value:1},"income"))),l.a.createElement(T.a.Item,{label:"Bill Category",name:"categoryId"},l.a.createElement(Y.a,{placeholder:"Please select bill category"},r.map((function(e,t){return l.a.createElement(Y.a.Option,{key:e.id,value:e.id},e.name)})))),l.a.createElement(T.a.Item,{name:"time",label:"Bill Month"},l.a.createElement(D.a,{picker:"month",format:"YYYY-MM"})),l.a.createElement(T.a.Item,{label:"Bill Amount"},l.a.createElement(T.a.Item,{name:"minAmount",style:{display:"inline-block"}},l.a.createElement(P.a,{min:0,step:.1,precision:2})),l.a.createElement("span",{style:{display:"inline-block",width:"24px",lineHeight:"32px",textAlign:"center"}},"-"),l.a.createElement(T.a.Item,{name:"maxAmount",style:{display:"inline-block"}},l.a.createElement(P.a,{min:0,step:.1,precision:2}))),l.a.createElement(T.a.Item,H,l.a.createElement(m.a,{type:"primary",htmlType:"submit"},"Search Bill"),l.a.createElement(m.a,{style:{margin:"0 8px"},onClick:function(){t.resetFields()}},"Reset")))},z=a(418),J=(a(399),a(400),i.a.Header),V=i.a.Footer,$=i.a.Sider,L=i.a.Content,W=function(){var e=Object(z.a)().t;return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,null,l.a.createElement(J,null,l.a.createElement("h1",null,e("App Name"))),l.a.createElement(i.a,null,l.a.createElement(L,null,l.a.createElement(I,null)),l.a.createElement($,{width:450},l.a.createElement(B,null),l.a.createElement(c.a,{dashed:!0,style:{borderColor:"#999"}}),l.a.createElement(M,null),l.a.createElement(c.a,{dashed:!0,style:{borderColor:"#999"}}),l.a.createElement(U,null))),l.a.createElement(V,null,"Powered by me.")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(151),G=a(92);K.a.use(G.e).init({resources:{en:{translation:{"App Name":"Accounting System"}},cn:{translation:{"App Name":"\u8bb0\u8d26\u5e94\u7528"}}},lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});K.a;o.a.render(l.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[208,1,2]]]);
//# sourceMappingURL=main.b7061246.chunk.js.map